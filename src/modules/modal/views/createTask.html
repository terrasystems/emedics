<div class="row ">
	<div class="content_modal">

		<p></p>
		<section>
			<p></p>
			<h4>Templates:</h4>
			<ui-select ng-model="vm.message.templates"
					   theme="bootstrap"
					   title="Choose a form">
				<ui-select-match placeholder="Select a form...">
					{{$select.selected.name}}
				</ui-select-match>
				<ui-select-choices
						refresh="vm.FindTemplates()"
						repeat="form.id as form in vm.templates">
					<div ng-bind-html="form.id | highlight: $select.search"></div>

				</ui-select-choices>
			</ui-select>
		</section>

		<section>
			<p></p>
			<h4>Patients:</h4>
			<ui-select multiple
					   ng-model="vm.message.patients"
					   theme="bootstrap"
					   close-on-select="true"
					   title="Choose a person"
					   on-select="vm.onSelectCallback($item, $model)"
					   on-remove="vm.onRemoveCallback($item, $model)">
				<ui-select-match placeholder="Select person...">{{$item.name}} &lt;{{$item.email}}&gt;</ui-select-match>
				<ui-select-choices refresh="vm.FindPatients($select.search)"
								   refresh-delay="1"
								   repeat="person.id as person in vm.patients">
					<div ng-bind-html="person.name | highlight: $select.search"></div>
					<small ng-if="person.id !== 'ALL'">email: {{person.email}}</small>
				</ui-select-choices>
			</ui-select>
		</section>

		<form name="myform" class="notif" action="">
			<textarea rows="6" cols="6" ng-model="vm.message.message" placeholder="{{'MESSAGE_TEXT' | translate}}"
					  rows="5"></textarea>
		</form>

		<button style="margin-right:10px;margin-bottom: 10px;"
				class="pull-right btn btn-primary"
				ng-disabled="(vm.message.template==='') || (vm.isMulti && vm.message.patients.length == 0)"
				ng-click="vm.Create();"
				translate="CREATE">
		</button>
	</div>
</div>